{"ast":null,"code":"import{useEffect,useState}from\"react\";import ComparisonChart from\"../components/ComparisonChart\";import{speakComparison}from\"../utils/speakPrice\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function ComparisonPage(){const[data,setData]=useState([]);const[cropA,setCropA]=useState(\"\");const[cropB,setCropB]=useState(\"\");useEffect(()=>{fetch(\"http://127.0.0.1:5000/api/data\").then(res=>res.json()).then(json=>setData(json));},[]);const crops=[...new Set(data.map(d=>d.Commodity||d.commodity||d.Crop||d.crop_name))];// ðŸ”¢ Average price calculator\nconst getAveragePrice=cropName=>{const cropData=data.filter(d=>{const name=d.Commodity||d.commodity||d.Crop||d.crop_name;return name===cropName;});if(!cropData.length)return 0;const total=cropData.reduce((sum,d)=>sum+Number(d.Modal_x0020_Price),0);return Math.round(total/cropData.length);};// ðŸ”Š Speak when both selected\nuseEffect(()=>{if(!cropA||!cropB)return;const priceA=getAveragePrice(cropA);const priceB=getAveragePrice(cropB);speakComparison({cropA,priceA,cropB,priceB});},[cropA,cropB]);return/*#__PURE__*/_jsxs(\"div\",{className:\"comparison-page\",style:{padding:\"20px\"},children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\uD83D\\uDCCA Crop Price Comparison\"}),/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",gap:\"20px\",marginBottom:\"20px\"},children:[/*#__PURE__*/_jsxs(\"select\",{value:cropA,onChange:e=>setCropA(e.target.value),children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"\\uD83C\\uDF3E Select Crop 1\"}),crops.map(c=>/*#__PURE__*/_jsx(\"option\",{value:c,children:c},c))]}),/*#__PURE__*/_jsxs(\"select\",{value:cropB,onChange:e=>setCropB(e.target.value),children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"\\uD83C\\uDF3E Select Crop 2\"}),crops.map(c=>/*#__PURE__*/_jsx(\"option\",{value:c,children:c},c))]})]}),cropA&&cropB&&/*#__PURE__*/_jsxs(\"div\",{style:{background:\"#f1f8e9\",padding:\"15px\",borderRadius:\"10px\",marginBottom:\"20px\"},children:[/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsxs(\"b\",{children:[cropA,\" Avg Price:\"]}),\" \\u20B9\",getAveragePrice(cropA)]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsxs(\"b\",{children:[cropB,\" Avg Price:\"]}),\" \\u20B9\",getAveragePrice(cropB)]})]}),/*#__PURE__*/_jsx(ComparisonChart,{cropA:cropA,cropB:cropB,data:data})]});}export default ComparisonPage;","map":{"version":3,"names":["useEffect","useState","ComparisonChart","speakComparison","jsx","_jsx","jsxs","_jsxs","ComparisonPage","data","setData","cropA","setCropA","cropB","setCropB","fetch","then","res","json","crops","Set","map","d","Commodity","commodity","Crop","crop_name","getAveragePrice","cropName","cropData","filter","name","length","total","reduce","sum","Number","Modal_x0020_Price","Math","round","priceA","priceB","className","style","padding","children","display","gap","marginBottom","value","onChange","e","target","c","background","borderRadius"],"sources":["C:/Users/Deepak K C/Desktop/best_time_to_sell_crop/frontend/src/pages/ComparisonPage.js"],"sourcesContent":["import { useEffect, useState } from \"react\";\r\nimport ComparisonChart from \"../components/ComparisonChart\";\r\nimport { speakComparison } from \"../utils/speakPrice\";\r\n\r\nfunction ComparisonPage() {\r\n  const [data, setData] = useState([]);\r\n  const [cropA, setCropA] = useState(\"\");\r\n  const [cropB, setCropB] = useState(\"\");\r\n\r\n  useEffect(() => {\r\n    fetch(\"http://127.0.0.1:5000/api/data\")\r\n      .then(res => res.json())\r\n      .then(json => setData(json));\r\n  }, []);\r\n\r\n  const crops = [\r\n    ...new Set(\r\n      data.map(\r\n        d =>\r\n          d.Commodity ||\r\n          d.commodity ||\r\n          d.Crop ||\r\n          d.crop_name\r\n      )\r\n    )\r\n  ];\r\n\r\n  // ðŸ”¢ Average price calculator\r\n  const getAveragePrice = cropName => {\r\n    const cropData = data.filter(d => {\r\n      const name =\r\n        d.Commodity ||\r\n        d.commodity ||\r\n        d.Crop ||\r\n        d.crop_name;\r\n      return name === cropName;\r\n    });\r\n\r\n    if (!cropData.length) return 0;\r\n\r\n    const total = cropData.reduce(\r\n      (sum, d) => sum + Number(d.Modal_x0020_Price),\r\n      0\r\n    );\r\n\r\n    return Math.round(total / cropData.length);\r\n  };\r\n\r\n  // ðŸ”Š Speak when both selected\r\n  useEffect(() => {\r\n    if (!cropA || !cropB) return;\r\n\r\n    const priceA = getAveragePrice(cropA);\r\n    const priceB = getAveragePrice(cropB);\r\n\r\n    speakComparison({\r\n      cropA,\r\n      priceA,\r\n      cropB,\r\n      priceB\r\n    });\r\n  }, [cropA, cropB]);\r\n\r\n  return (\r\n    <div className=\"comparison-page\" style={{ padding: \"20px\" }}>\r\n      <h2>ðŸ“Š Crop Price Comparison</h2>\r\n\r\n      <div\r\n        style={{\r\n          display: \"flex\",\r\n          gap: \"20px\",\r\n          marginBottom: \"20px\"\r\n        }}\r\n      >\r\n        <select value={cropA} onChange={e => setCropA(e.target.value)}>\r\n          <option value=\"\">ðŸŒ¾ Select Crop 1</option>\r\n          {crops.map(c => (\r\n            <option key={c} value={c}>{c}</option>\r\n          ))}\r\n        </select>\r\n\r\n        <select value={cropB} onChange={e => setCropB(e.target.value)}>\r\n          <option value=\"\">ðŸŒ¾ Select Crop 2</option>\r\n          {crops.map(c => (\r\n            <option key={c} value={c}>{c}</option>\r\n          ))}\r\n        </select>\r\n      </div>\r\n\r\n      {/* PRICE INFO */}\r\n      {cropA && cropB && (\r\n        <div\r\n          style={{\r\n            background: \"#f1f8e9\",\r\n            padding: \"15px\",\r\n            borderRadius: \"10px\",\r\n            marginBottom: \"20px\"\r\n          }}\r\n        >\r\n          <p><b>{cropA} Avg Price:</b> â‚¹{getAveragePrice(cropA)}</p>\r\n          <p><b>{cropB} Avg Price:</b> â‚¹{getAveragePrice(cropB)}</p>\r\n        </div>\r\n      )}\r\n\r\n      {/* GRAPH */}\r\n      <ComparisonChart\r\n        cropA={cropA}\r\n        cropB={cropB}\r\n        data={data}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ComparisonPage;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}