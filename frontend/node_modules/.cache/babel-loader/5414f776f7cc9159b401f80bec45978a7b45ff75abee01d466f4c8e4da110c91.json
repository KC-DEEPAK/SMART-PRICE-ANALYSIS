{"ast":null,"code":"import{useState,useEffect}from\"react\";import{getCategory}from\"../utils/cropCategories\";import{getSellDecision}from\"../utils/sellDecision\";import{jsxs as _jsxs,jsx as _jsx}from\"react/jsx-runtime\";function CategoryList(_ref){let{data=[],category}=_ref;const[selectedCrop,setSelectedCrop]=useState(null);// ðŸ”‘ RESET selected crop when category changes\nuseEffect(()=>{setSelectedCrop(null);},[category]);// ðŸ›‘ Safety checks\nif(!Array.isArray(data)||!category)return null;// Filter data by category\nconst filteredData=data.filter(item=>{const crop=(item===null||item===void 0?void 0:item.Commodity)||(item===null||item===void 0?void 0:item.commodity)||(item===null||item===void 0?void 0:item.Crop)||(item===null||item===void 0?void 0:item.crop_name);return crop&&getCategory(crop)===category;});if(!filteredData.length){return/*#__PURE__*/_jsx(\"div\",{style:{padding:\"20px\"},children:/*#__PURE__*/_jsxs(\"h3\",{children:[\"No data found for \",category]})});}// Group by crop\nconst cropMap={};filteredData.forEach(item=>{const crop=(item===null||item===void 0?void 0:item.Commodity)||(item===null||item===void 0?void 0:item.commodity)||(item===null||item===void 0?void 0:item.Crop)||(item===null||item===void 0?void 0:item.crop_name);if(!crop)return;if(!cropMap[crop])cropMap[crop]=[];cropMap[crop].push(item);});const cropNames=Object.keys(cropMap);return/*#__PURE__*/_jsxs(\"div\",{style:{padding:\"20px\"},children:[/*#__PURE__*/_jsxs(\"h2\",{children:[category,\" Crops\"]}),/*#__PURE__*/_jsx(\"div\",{style:{display:\"flex\",gap:\"10px\",flexWrap:\"wrap\",marginBottom:\"20px\"},children:cropNames.map(crop=>/*#__PURE__*/_jsx(\"button\",{onClick:()=>setSelectedCrop(crop),style:{padding:\"10px 16px\",borderRadius:\"20px\",border:\"1px solid #aaa\",background:selectedCrop===crop?\"#c8e6c9\":\"#f5f5f5\",cursor:\"pointer\"},children:crop},crop))}),selectedCrop&&Array.isArray(cropMap[selectedCrop])&&/*#__PURE__*/_jsxs(\"table\",{border:\"1\",width:\"100%\",cellPadding:\"8\",style:{borderCollapse:\"collapse\"},children:[/*#__PURE__*/_jsx(\"thead\",{style:{background:\"#f1f8e9\"},children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Market\"}),/*#__PURE__*/_jsx(\"th\",{children:\"State\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Price \\u20B9\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Advice\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:cropMap[selectedCrop].map((item,i)=>{const prices=cropMap[selectedCrop].map(d=>Number(d.Modal_x0020_Price));const avg=prices.reduce((a,b)=>a+b,0)/prices.length;const current=Number(item.Modal_x0020_Price);const decision=getSellDecision(current,avg);return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:item.Market}),/*#__PURE__*/_jsx(\"td\",{children:item.State}),/*#__PURE__*/_jsxs(\"td\",{children:[\"\\u20B9\",current]}),/*#__PURE__*/_jsxs(\"td\",{children:[decision===\"SELL\"&&/*#__PURE__*/_jsx(\"span\",{style:{color:\"green\"},children:\"\\uD83D\\uDFE2 SELL NOW\"}),decision===\"WAIT\"&&/*#__PURE__*/_jsx(\"span\",{style:{color:\"red\"},children:\"\\uD83D\\uDD34 WAIT\"}),decision===\"HOLD\"&&/*#__PURE__*/_jsx(\"span\",{style:{color:\"orange\"},children:\"\\uD83D\\uDFE1 HOLD\"})]})]},i);})})]})]});}export default CategoryList;","map":{"version":3,"names":["useState","useEffect","getCategory","getSellDecision","jsxs","_jsxs","jsx","_jsx","CategoryList","_ref","data","category","selectedCrop","setSelectedCrop","Array","isArray","filteredData","filter","item","crop","Commodity","commodity","Crop","crop_name","length","style","padding","children","cropMap","forEach","push","cropNames","Object","keys","display","gap","flexWrap","marginBottom","map","onClick","borderRadius","border","background","cursor","width","cellPadding","borderCollapse","i","prices","d","Number","Modal_x0020_Price","avg","reduce","a","b","current","decision","Market","State","color"],"sources":["C:/Users/Deepak K C/Desktop/best_time_to_sell_crop/frontend/src/components/CategoryList.jsx"],"sourcesContent":["import { useState, useEffect } from \"react\";\r\nimport { getCategory } from \"../utils/cropCategories\";\r\nimport { getSellDecision } from \"../utils/sellDecision\";\r\n\r\nfunction CategoryList({ data = [], category }) {\r\n  const [selectedCrop, setSelectedCrop] = useState(null);\r\n\r\n  // ðŸ”‘ RESET selected crop when category changes\r\n  useEffect(() => {\r\n    setSelectedCrop(null);\r\n  }, [category]);\r\n\r\n  // ðŸ›‘ Safety checks\r\n  if (!Array.isArray(data) || !category) return null;\r\n\r\n  // Filter data by category\r\n  const filteredData = data.filter(item => {\r\n    const crop =\r\n      item?.Commodity ||\r\n      item?.commodity ||\r\n      item?.Crop ||\r\n      item?.crop_name;\r\n\r\n    return crop && getCategory(crop) === category;\r\n  });\r\n\r\n  if (!filteredData.length) {\r\n    return (\r\n      <div style={{ padding: \"20px\" }}>\r\n        <h3>No data found for {category}</h3>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Group by crop\r\n  const cropMap = {};\r\n  filteredData.forEach(item => {\r\n    const crop =\r\n      item?.Commodity ||\r\n      item?.commodity ||\r\n      item?.Crop ||\r\n      item?.crop_name;\r\n\r\n    if (!crop) return;\r\n\r\n    if (!cropMap[crop]) cropMap[crop] = [];\r\n    cropMap[crop].push(item);\r\n  });\r\n\r\n  const cropNames = Object.keys(cropMap);\r\n\r\n  return (\r\n    <div style={{ padding: \"20px\" }}>\r\n      <h2>{category} Crops</h2>\r\n\r\n      {/* ðŸŒ¾ Crop buttons */}\r\n      <div\r\n        style={{\r\n          display: \"flex\",\r\n          gap: \"10px\",\r\n          flexWrap: \"wrap\",\r\n          marginBottom: \"20px\"\r\n        }}\r\n      >\r\n        {cropNames.map(crop => (\r\n          <button\r\n            key={crop}\r\n            onClick={() => setSelectedCrop(crop)}\r\n            style={{\r\n              padding: \"10px 16px\",\r\n              borderRadius: \"20px\",\r\n              border: \"1px solid #aaa\",\r\n              background:\r\n                selectedCrop === crop ? \"#c8e6c9\" : \"#f5f5f5\",\r\n              cursor: \"pointer\"\r\n            }}\r\n          >\r\n            {crop}\r\n          </button>\r\n        ))}\r\n      </div>\r\n\r\n      {/* ðŸ“‹ Market table */}\r\n      {selectedCrop &&\r\n        Array.isArray(cropMap[selectedCrop]) && (\r\n          <table\r\n            border=\"1\"\r\n            width=\"100%\"\r\n            cellPadding=\"8\"\r\n            style={{ borderCollapse: \"collapse\" }}\r\n          >\r\n            <thead style={{ background: \"#f1f8e9\" }}>\r\n              <tr>\r\n                <th>Market</th>\r\n                <th>State</th>\r\n                <th>Price â‚¹</th>\r\n                <th>Advice</th>\r\n              </tr>\r\n            </thead>\r\n\r\n            <tbody>\r\n              {cropMap[selectedCrop].map((item, i) => {\r\n                const prices = cropMap[selectedCrop].map(d =>\r\n                  Number(d.Modal_x0020_Price)\r\n                );\r\n\r\n                const avg =\r\n                  prices.reduce((a, b) => a + b, 0) /\r\n                  prices.length;\r\n\r\n                const current = Number(\r\n                  item.Modal_x0020_Price\r\n                );\r\n\r\n                const decision = getSellDecision(\r\n                  current,\r\n                  avg\r\n                );\r\n\r\n                return (\r\n                  <tr key={i}>\r\n                    <td>{item.Market}</td>\r\n                    <td>{item.State}</td>\r\n                    <td>â‚¹{current}</td>\r\n                    <td>\r\n                      {decision === \"SELL\" && (\r\n                        <span style={{ color: \"green\" }}>\r\n                          ðŸŸ¢ SELL NOW\r\n                        </span>\r\n                      )}\r\n                      {decision === \"WAIT\" && (\r\n                        <span style={{ color: \"red\" }}>\r\n                          ðŸ”´ WAIT\r\n                        </span>\r\n                      )}\r\n                      {decision === \"HOLD\" && (\r\n                        <span style={{ color: \"orange\" }}>\r\n                          ðŸŸ¡ HOLD\r\n                        </span>\r\n                      )}\r\n                    </td>\r\n                  </tr>\r\n                );\r\n              })}\r\n            </tbody>\r\n          </table>\r\n        )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default CategoryList;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}