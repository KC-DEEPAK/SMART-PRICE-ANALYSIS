{"ast":null,"code":"import{useEffect,useState}from\"react\";import PriceListGraph from\"../components/PriceListGraph\";import{speakDecision}from\"../utils/speakDecision\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";function PriceListPage(){const[data,setData]=useState([]);const[selectedCrop,setSelectedCrop]=useState(\"\");const user=JSON.parse(localStorage.getItem(\"user\"))||{};useEffect(()=>{fetch(\"http://127.0.0.1:5000/api/data\").then(res=>res.json()).then(json=>setData(json));},[]);const crops=[...new Set(data.map(d=>d.Commodity||d.commodity||d.Crop||d.crop_name).filter(Boolean))];const cropData=data.filter(d=>{const name=d.Commodity||d.commodity||d.Crop||d.crop_name;return name===selectedCrop;});const sortedData=[...cropData].sort((a,b)=>Number(b.Modal_x0020_Price)-Number(a.Modal_x0020_Price));const allPrices=sortedData.map(d=>Number(d.Modal_x0020_Price));return/*#__PURE__*/_jsxs(\"div\",{style:{padding:\"20px\"},children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\uD83D\\uDCCB Crop Price List\"}),/*#__PURE__*/_jsxs(\"select\",{value:selectedCrop,onChange:e=>setSelectedCrop(e.target.value),style:{padding:\"10px\",width:\"300px\"},children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"\\uD83C\\uDF3E Select Crop\"}),crops.map(c=>/*#__PURE__*/_jsx(\"option\",{value:c,children:c},c))]}),selectedCrop&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(PriceListGraph,{data:sortedData}),/*#__PURE__*/_jsxs(\"table\",{border:\"1\",width:\"100%\",cellPadding:\"8\",style:{marginTop:\"20px\"},children:[/*#__PURE__*/_jsx(\"thead\",{style:{background:\"#e8f5e9\"},children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Market\"}),/*#__PURE__*/_jsx(\"th\",{children:\"State\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Price\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Voice\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:sortedData.map((d,i)=>/*#__PURE__*/_jsxs(\"tr\",{style:{background:i===0?\"#fff9c4\":\"white\"},children:[/*#__PURE__*/_jsxs(\"td\",{children:[i===0&&\"‚≠ê \",\" \",d.Market]}),/*#__PURE__*/_jsx(\"td\",{children:d.State}),/*#__PURE__*/_jsxs(\"td\",{children:[\"\\u20B9\",d.Modal_x0020_Price]}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>speakDecision({userName:user.name||\"Farmer\",crop:selectedCrop,market:d.Market,state:d.State,price:Number(d.Modal_x0020_Price),allPrices}),style:{border:\"none\",background:\"transparent\",cursor:\"pointer\",fontSize:\"18px\"},children:\"\\uD83D\\uDD0A\"})})]},i))})]})]})]});}export default PriceListPage;","map":{"version":3,"names":["useEffect","useState","PriceListGraph","speakDecision","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","PriceListPage","data","setData","selectedCrop","setSelectedCrop","user","JSON","parse","localStorage","getItem","fetch","then","res","json","crops","Set","map","d","Commodity","commodity","Crop","crop_name","filter","Boolean","cropData","name","sortedData","sort","a","b","Number","Modal_x0020_Price","allPrices","style","padding","children","value","onChange","e","target","width","c","border","cellPadding","marginTop","background","i","Market","State","onClick","userName","crop","market","state","price","cursor","fontSize"],"sources":["C:/Users/Deepak K C/Desktop/best_time_to_sell_crop/frontend/src/pages/PriceListPage.js"],"sourcesContent":["import { useEffect, useState } from \"react\";\r\nimport PriceListGraph from \"../components/PriceListGraph\";\r\nimport { speakDecision } from \"../utils/speakDecision\";\r\n\r\nfunction PriceListPage() {\r\n  const [data, setData] = useState([]);\r\n  const [selectedCrop, setSelectedCrop] = useState(\"\");\r\n\r\n  const user =\r\n    JSON.parse(localStorage.getItem(\"user\")) || {};\r\n\r\n  useEffect(() => {\r\n    fetch(\"http://127.0.0.1:5000/api/data\")\r\n      .then(res => res.json())\r\n      .then(json => setData(json));\r\n  }, []);\r\n\r\n  const crops = [\r\n    ...new Set(\r\n      data\r\n        .map(\r\n          d =>\r\n            d.Commodity ||\r\n            d.commodity ||\r\n            d.Crop ||\r\n            d.crop_name\r\n        )\r\n        .filter(Boolean)\r\n    )\r\n  ];\r\n\r\n  const cropData = data.filter(d => {\r\n    const name =\r\n      d.Commodity ||\r\n      d.commodity ||\r\n      d.Crop ||\r\n      d.crop_name;\r\n    return name === selectedCrop;\r\n  });\r\n\r\n  const sortedData = [...cropData].sort(\r\n    (a, b) =>\r\n      Number(b.Modal_x0020_Price) -\r\n      Number(a.Modal_x0020_Price)\r\n  );\r\n\r\n  const allPrices = sortedData.map(d =>\r\n    Number(d.Modal_x0020_Price)\r\n  );\r\n\r\n  return (\r\n    <div style={{ padding: \"20px\" }}>\r\n      <h2>üìã Crop Price List</h2>\r\n\r\n      <select\r\n        value={selectedCrop}\r\n        onChange={e => setSelectedCrop(e.target.value)}\r\n        style={{ padding: \"10px\", width: \"300px\" }}\r\n      >\r\n        <option value=\"\">üåæ Select Crop</option>\r\n        {crops.map(c => (\r\n          <option key={c} value={c}>\r\n            {c}\r\n          </option>\r\n        ))}\r\n      </select>\r\n\r\n      {selectedCrop && (\r\n        <>\r\n          <PriceListGraph data={sortedData} />\r\n\r\n          <table\r\n            border=\"1\"\r\n            width=\"100%\"\r\n            cellPadding=\"8\"\r\n            style={{ marginTop: \"20px\" }}\r\n          >\r\n            <thead style={{ background: \"#e8f5e9\" }}>\r\n              <tr>\r\n                <th>Market</th>\r\n                <th>State</th>\r\n                <th>Price</th>\r\n                <th>Voice</th>\r\n              </tr>\r\n            </thead>\r\n\r\n            <tbody>\r\n              {sortedData.map((d, i) => (\r\n                <tr\r\n                  key={i}\r\n                  style={{\r\n                    background:\r\n                      i === 0 ? \"#fff9c4\" : \"white\"\r\n                  }}\r\n                >\r\n                  <td>\r\n                    {i === 0 && \"‚≠ê \"} {d.Market}\r\n                  </td>\r\n                  <td>{d.State}</td>\r\n                  <td>‚Çπ{d.Modal_x0020_Price}</td>\r\n                  <td>\r\n                    <button\r\n                      onClick={() =>\r\n                        speakDecision({\r\n                          userName: user.name || \"Farmer\",\r\n                          crop: selectedCrop,\r\n                          market: d.Market,\r\n                          state: d.State,\r\n                          price: Number(\r\n                            d.Modal_x0020_Price\r\n                          ),\r\n                          allPrices\r\n                        })\r\n                      }\r\n                      style={{\r\n                        border: \"none\",\r\n                        background: \"transparent\",\r\n                        cursor: \"pointer\",\r\n                        fontSize: \"18px\"\r\n                      }}\r\n                    >\r\n                      üîä\r\n                    </button>\r\n                  </td>\r\n                </tr>\r\n              ))}\r\n            </tbody>\r\n          </table>\r\n        </>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default PriceListPage;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}